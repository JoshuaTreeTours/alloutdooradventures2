const formatHeader = () =>
  "// This file is auto-generated by scripts/generate-sedona-pages.ts. Do not edit manually.\n";

type CityTemplateContext = {
  stateSlug: string;
  citySlug: string;
};

export const renderCityTourPage = (slug: string) => `${formatHeader()}\
import CityTourPage from "./CityTourPage";
import { getCityTourBySlug } from "./cityTourData";

const tour = getCityTourBySlug("${slug}");

export default function CityTourDetailRoute() {
  return <CityTourPage tour={tour} />;
}
`;

export const renderCityBookingPage = (slug: string) => `${formatHeader()}\
import CityTourBookingPage from "../CityTourBookingPage";
import { getCityTourBySlug } from "../cityTourData";

const tour = getCityTourBySlug("${slug}");

export default function CityTourBookingRoute() {
  return <CityTourBookingPage tour={tour} />;
}
`;

export const renderCityRoutes = (
  slugs: string[],
  context: CityTemplateContext,
) => {
  const imports = [
    'import CityIndex from "./index";',
    ...slugs.map(
      (slug, index) =>
        `import CityTourPage${index} from "./${slug}";\nimport CityBookingPage${index} from "./book/${slug}";`,
    ),
  ].join("\n");

  const routes = [
    `  { path: "/${context.stateSlug}/${context.citySlug}", component: CityIndex },`,
    ...slugs.map(
      (slug, index) =>
        `  { path: "/${context.stateSlug}/${context.citySlug}/${slug}", component: CityTourPage${index} },\n  { path: "/${context.stateSlug}/${context.citySlug}/book/${slug}", component: CityBookingPage${index} },`,
    ),
  ].join("\n");

  return `${formatHeader()}\
import type { ComponentType } from "react";
${imports}

type CityRoute = {
  path: string;
  component: ComponentType;
};

export const cityTourRoutes: CityRoute[] = [
${routes}
];
`;
};
